# Generated by chef
global]
	auth supported = cephx
	ms bind ipv6 = true
	keyring = /etc/ceph/$name.keyring

[mon]   
	mon data = /srv/ceph/mon.$id
	mon clock drift allowed = 0.1
	osd pool default size = 3
	osd pool default crush rule = 0
	mon osd down out interval = <%= node['ceph']['mon_osd_down_out_interval'] %>
	debug mon = <%= node['ceph']['debug_mon'] %>
	debug ms = <%= node['ceph']['debug_ms'] %>

# Find all MONs, add entry here like:
<% monitors.each do |monitor| -%>
[mon.<%= monitor['hostname']%>]
	host = <%= monitor['hostname'] %>
	mon addr = <%= monitor['network'][node[:network][:storage_front]]['v6']['addr']['primary'] %>
<% end -%>


[mds]

[osd]   
	osd data = /srv/ceph/devies/osd.$id.data
	osd journal = /srv/ceph/devices/osd.$id.journal
	keyring = /mnt/osd.$id/keyring
	debug osd = <%= node['ceph']['debug_osd'] %>
	debug ms = <%= node['ceph']['debug_ms'] %>
	debug filestore = <%= node['ceph']['debug_filestore'] %>
	filestore max sync interval = 60
	filestore flusher = false
	<% if defined? node['network'][node[:network][:storage_back]]['v6']['addr']['primary'] %>
	cluster addr = <%= node['network'][node[:network][:storage_back]]['v6']['addr']['primary'] %> 
	public addr = <%= node['network'][node[:network][:storage_front]['v6']['addr']['primary'] %>
	<% end %>
